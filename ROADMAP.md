# Roadmap - RootCause MCP

é†«ç™‚æ ¹å› åˆ†æ MCP Server ç™¼å±•è·¯ç·šåœ–ã€‚

---

## ğŸ¯ é¡˜æ™¯ï¼šMulti-Model RCA Framework

æœ¬å°ˆæ¡ˆä¸åƒ…æ˜¯ã€Œäº‹å¾Œèª¿æŸ¥ (RCA)ã€å·¥å…·ï¼Œè€Œæ˜¯å®Œæ•´çš„ **å¤šæ¨¡å‹å› æœåˆ†ææ¡†æ¶**ï¼Œé€é **é ˜åŸŸå¡åŒ£ (Cartridge)** æ”¯æ´ä¸‰å¤§é¡åˆ†ææ¨¡å‹ï¼š

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        RootCause MCP                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  PROSPECTIVE    â”‚  â”‚  RETROSPECTIVE  â”‚  â”‚    SYSTEMIC     â”‚         â”‚
â”‚  â”‚  å‰ç»æ€§é é˜²     â”‚  â”‚  å›æº¯æ€§èª¿æŸ¥     â”‚  â”‚  ç³»çµ±è¤‡é›œæ€§     â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ â€¢ HFMEA         â”‚  â”‚ â€¢ HFACS âœ…      â”‚  â”‚ â€¢ STAMP/STPA    â”‚         â”‚
â”‚  â”‚ â€¢ HVA           â”‚  â”‚ â€¢ 5-Whys âœ…     â”‚  â”‚ â€¢ FRAM          â”‚         â”‚
â”‚  â”‚ â€¢ Bowtie        â”‚  â”‚ â€¢ Fishbone âœ…   â”‚  â”‚ â€¢ AcciMap       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚           â”‚                   â”‚                    â”‚                    â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                               â–¼                                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚                    â”‚  Unified Graph API  â”‚                              â”‚
â”‚                    â”‚   (MCP Tools Layer) â”‚                              â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å·²å®Œæˆ âœ…

### Phase 0: è¦æ ¼èˆ‡è¨­è¨ˆ (2026-01-14)

- [x] è¦æ ¼æ›¸ v2.5.0 å®Œæˆ (docs/spec_v2.md)
- [x] 35 å€‹ MCP Tools å®šç¾©
- [x] HFACS-MES æ¡†æ¶æ•´åˆ
- [x] é†«ç™‚ 6M é­šéª¨åœ–è¨­è¨ˆ
- [x] æ¼¸é€²å¼è¼¸å…¥è¨­è¨ˆ (Level 1/2/3)

### Phase 1: æ ¸å¿ƒæ¶æ§‹ (2026-01-15)

- [x] Domain Layer å¯¦ä½œ (Entities, Value Objects, Services)
- [x] Infrastructure Layer (SQLite + SQLModel)
- [x] YAML-based è¦å‰‡ç³»çµ±
- [x] MCP Server åŸºç¤æ¶æ§‹

### Phase 2: MVP Tools - Retrospective Cartridge (2026-01-15)

- [x] HFACS Tools (5)
  - rc_suggest_hfacs, rc_confirm_classification
  - rc_get_hfacs_framework, rc_list_learned_rules, rc_reload_rules
- [x] Session Tools (4)
  - rc_start_session, rc_get_session
  - rc_list_sessions, rc_archive_session
- [x] Fishbone Tools (4)
  - rc_init_fishbone, rc_add_cause
  - rc_get_fishbone, rc_export_fishbone
- [x] æ¸¬è©¦é€šé (tests/test_mcp_tools.py)

### Phase 2.5: DDD é‡æ§‹ + é€²éšåŠŸèƒ½ (2026-01-16)

- [x] Why Tree Tools (4) - **5-Whys Cartridge**
  - rc_ask_why, rc_get_why_tree
  - rc_mark_root_cause, rc_export_why_tree
- [x] Verification Tool (1)
  - rc_verify_causation (å› æœé©—è­‰ - Bradford Hill Criteria)
- [x] 6M-HFACS å°ç…§å·¥å…· (1)
  - rc_get_6m_hfacs_mapping (è¡¨åœ–æ¨¹ Cross-Reference)
- [x] Proximate vs Ultimate Cause æ¦‚å¿µå¯¦ä½œ
- [x] GuidedResponse é€²åº¦è¿½è¹¤æ•´åˆ
- [x] ç¸½è¨ˆ 19 å€‹ MCP Tools ä¸Šç·š

---

## é€²è¡Œä¸­ ğŸš§

### Phase 3: Academic RCA Framework ğŸ“š

**ç›®æ¨™ï¼š** å¾ã€ŒLLM ç§’è§£ã€æå‡è‡³ã€Œå­¸è¡“ Case Reportã€æ·±åº¦è¨è«–

#### 3.1 å¼·åˆ¶é‘‘åˆ¥è¨ºæ–·å±•é–‹ (Differential Diagnosis)

| Tool | èªªæ˜ |
|------|------|
| `rc_generate_differentials` | å¼·åˆ¶ç”¢ç”Ÿ â‰¥5 å€‹é‘‘åˆ¥è¨ºæ–·å‡è¨­ |
| `rc_evaluate_hypothesis` | é€ä¸€è©•ä¼°ï¼šæ”¯æŒ/åå°è­‰æ“šã€æ’é™¤ç†ç”± |
| `rc_rank_hypotheses` | ä¾ Pre-test probability æ’åº |

**è¨­è¨ˆåŸå‰‡ï¼š** ä¸èƒ½ç›´æ¥è·³åˆ°ç­”æ¡ˆï¼Œå¿…é ˆå±•ç¤ºå®Œæ•´æ¨ç†éç¨‹

#### 3.2 è­‰æ“šè©•åˆ†ç³»çµ± (Evidence Grading)

| Tool | èªªæ˜ |
|------|------|
| `rc_add_evidence` | æ–°å¢è­‰æ“š (é™„é¡å‹èˆ‡å“è³ªè©•åˆ†) |
| `rc_grade_evidence` | GRADE-like è­‰æ“šç­‰ç´šè©•ä¼° |
| `rc_identify_gaps` | è‡ªå‹•è­˜åˆ¥è­‰æ“šç¼ºå£ |

**è­‰æ“šé¡å‹æ¬Šé‡ï¼š**
- `pathognomonic` (1.0) - 100% ç¢ºè¨º
- `direct_observation` (0.9) - ç›´æ¥è§€å¯Ÿ
- `objective_data` (0.8) - Lab/Monitor æ•¸æ“š
- `documentation` (0.6) - æ–‡ä»¶è¨˜éŒ„
- `testimony` (0.4) - è­‰è©
- `inference` (0.2) - æ¨è«–

#### 3.3 åäº‹å¯¦åˆ†æ (Counterfactual Analysis)

| Tool | èªªæ˜ |
|------|------|
| `rc_counterfactual_analysis` | "å¦‚æœç•¶æ™‚..."åˆ†æ (å¼·åˆ¶ â‰¥3 å€‹) |
| `rc_calculate_impact` | è¨ˆç®—ä»‹å…¥å°çµæœçš„å½±éŸ¿æ©Ÿç‡ |
| `rc_timeline_intervention` | æ™‚é–“è»¸ä¸Šæ¨™è¨»å¯ä»‹å…¥é» |

**ç¯„ä¾‹è¼¸å‡ºï¼š**
```
å¦‚æœåœ¨ 08:05 åš TEE â†’ 85% æ©Ÿç‡ææ—© 10 åˆ†é˜è¨ºæ–·
å¦‚æœæ²’çµ¦ Epinephrine â†’ 75% æ©Ÿç‡é¿å…æƒ¡åŒ–
```

#### 3.4 æ©Ÿè½‰æ·±åº¦è§£æ (Pathophysiology Deep Dive)

| Tool | èªªæ˜ |
|------|------|
| `rc_deep_dive_mechanism` | å¼·åˆ¶æ·±åº¦è§£é‡‹ (ä¸èƒ½åªèªª "å› ç‚º SAM") |
| `rc_add_equation` | ç›¸é—œå…¬å¼ (e.g., Gradient = 4VÂ²) |
| `rc_visualize_mechanism` | æ©Ÿè½‰åœ–è§£ (Mermaid æµç¨‹åœ–) |

**æ·±åº¦ç­‰ç´šï¼š** `student` â†’ `resident` â†’ `fellow` â†’ `attending` â†’ `expert`

#### 3.5 å¤šå±¤æ¬¡ç³»çµ±åˆ†æ (Multi-Level System Analysis)

| Tool | èªªæ˜ |
|------|------|
| `rc_analyze_individual` | å€‹äººå±¤æ¬¡åˆ†æ |
| `rc_analyze_team` | åœ˜éšŠå±¤æ¬¡åˆ†æ |
| `rc_analyze_organization` | çµ„ç¹”å±¤æ¬¡åˆ†æ |
| `rc_analyze_regulatory` | æ³•è¦/åˆ¶åº¦å±¤æ¬¡åˆ†æ |
| `rc_cross_level_links` | è·¨å±¤æ¬¡å› æœé€£çµ |

#### 3.6 æ–‡ç»æ•´åˆ (Literature Integration) ğŸ”—

| Tool | èªªæ˜ |
|------|------|
| `rc_search_literature` | æ•´åˆ PubMed MCP æœå°‹ç›¸é—œæ–‡ç» |
| `rc_link_evidence_to_pmid` | å°‡è­‰æ“šé€£çµåˆ° PMID |
| `rc_fetch_case_reports` | è‡ªå‹•æœå°‹ç›¸ä¼¼ Case Reports |
| `rc_extract_incidence` | å¾æ–‡ç»æå–ç™¼ç”Ÿç‡æ•¸æ“š |

**èˆ‡ pubmed-search MCP æ•´åˆï¼š**
- è‡ªå‹•æœå°‹è¨ºæ–·ç›¸é—œ Case Reports
- æå– Guidelines å»ºè­°
- é€£çµ Mechanism æ–‡ç»

#### 3.7 æ•™å­¸èƒå– (Teaching Point Extraction)

| Tool | èªªæ˜ |
|------|------|
| `rc_extract_pearls` | èƒå– Clinical Pearls (ä¸€å¥è©±é‡é») |
| `rc_identify_pitfalls` | è­˜åˆ¥å¸¸è¦‹éŒ¯èª¤ |
| `rc_generate_questions` | ç”Ÿæˆ Board-style è€ƒé¡Œ |
| `rc_create_teaching_case` | è½‰æ›ç‚ºæ•™å­¸æ¡ˆä¾‹æ ¼å¼ |

#### 3.8 å­¸è¡“å ±å‘Šç”Ÿæˆ (Academic Report Generation)

| Tool | èªªæ˜ |
|------|------|
| `rc_generate_case_report` | ç”Ÿæˆå­¸è¡“ Case Report æ ¼å¼ |
| `rc_export_for_journal` | åŒ¯å‡ºæœŸåˆŠæŠ•ç¨¿æ ¼å¼ |
| `rc_generate_m_and_m` | ç”Ÿæˆ M&M Conference ç°¡å ± |

**è¼¸å‡ºçµæ§‹ï¼š**
1. Case Presentation (ç´”å®¢è§€)
2. Differential Diagnosis (â‰¥5 å‡è¨­)
3. Diagnostic Reasoning (æ’é™¤éç¨‹)
4. Pathophysiology (æ©Ÿè½‰æ·±ç©¶)
5. Counterfactual Analysis (åäº‹å¯¦)
6. System Analysis (å¤šå±¤æ¬¡)
7. Literature Review (æ–‡ç»é€£çµ)
8. Teaching Points (æ•™å­¸èƒå–)

---

### Phase 3.X: å‹•æ…‹åœ–è¡¨ç³»çµ± ğŸ“Š

#### 3.X.1 å› æœ DAG (Directed Acyclic Graph)

**ç›®æ¨™ï¼š** å¾ç·šæ€§ 5-Why å‡ç´šç‚ºå¤šåˆ†æ”¯å› æœåœ–

| Tool | èªªæ˜ |
|------|------|
| `rc_add_causal_link` | æ–°å¢å› æœé€£çµ (å¤šå°å¤š) |
| `rc_set_link_strength` | è¨­å®šå› æœå¼·åº¦ (0-1) |
| `rc_find_all_root_causes` | æ‰¾å‡ºæ‰€æœ‰æ ¹å›  (éå–®ä¸€) |
| `rc_calculate_contribution` | è¨ˆç®—å„å› ç´ è²¢ç»åº¦ |

**å› æœé—œä¿‚é¡å‹ï¼š**
- `necessary` - å¿…è¦æ¢ä»¶
- `sufficient` - å……åˆ†æ¢ä»¶
- `contributing` - ä¿ƒæˆå› ç´ 
- `correlated` - ç›¸é—œä½†éå› æœ

#### 3.X.2 æ™‚åºæ•´åˆ (Timeline Integration)

| Tool | èªªæ˜ |
|------|------|
| `rc_add_timestamp` | ç‚ºç¯€é»æ·»åŠ æ™‚é–“æˆ³ |
| `rc_build_timeline` | è‡ªå‹•ç”Ÿæˆæ™‚åºåœ– |
| `rc_validate_temporality` | é©—è­‰æ™‚åºå› æœ (å› å¿…é ˆå…ˆæ–¼æœ) |
| `rc_identify_critical_window` | è­˜åˆ¥é—œéµæ™‚é–“çª—å£ |

#### 3.X.3 äº’å‹•å¼è¼¸å‡º (Interactive Export)

| Tool | èªªæ˜ |
|------|------|
| `rc_export_cytoscape` | åŒ¯å‡º Cytoscape.js JSON |
| `rc_export_d3` | åŒ¯å‡º D3.js æ ¼å¼ |
| `rc_export_html_viewer` | ç”Ÿæˆç¨ç«‹ HTML æª¢è¦–å™¨ |
| `rc_export_vscode_webview` | VS Code Webview æ•´åˆ |

**äº’å‹•åŠŸèƒ½ï¼š**
- ç¯€é»å¯æ‹–æ›³
- é»æ“Šå±•é–‹è©³æƒ…
- å‹•æ…‹é«˜äº®å› æœè·¯å¾‘
- æ™‚é–“è»¸æ’­æ”¾

#### 3.X.4 å‹•æ…‹åˆ†é¡ç³»çµ± (Domain Cartridge)

**ç›®æ¨™ï¼š** ä¸åŒé ˜åŸŸä½¿ç”¨ä¸åŒåˆ†é¡æ¡†æ¶

```yaml
# config/domains/anesthesia.yaml
domain: anesthesia
categories:
  - id: patient_factors
    subcategories: [anatomy, physiology, comorbidities]
  - id: airway
    subcategories: [assessment, equipment, technique]
  - id: hemodynamics
    subcategories: [monitoring, drugs, volume]
  - id: system
    subcategories: [communication, handoff, workload]
```

| Tool | èªªæ˜ |
|------|------|
| `rc_load_domain` | è¼‰å…¥é ˜åŸŸå¡åŒ£ |
| `rc_list_domains` | åˆ—å‡ºå¯ç”¨é ˜åŸŸ |
| `rc_create_domain` | å‰µå»ºè‡ªè¨‚é ˜åŸŸ |

---

### Phase 3.Y: è¨è«–å¼•å°ç³»çµ± (Guided Discussion)

**ç›®æ¨™ï¼š** å¼·åˆ¶ LLM æŒ‰æ¡†æ¶å±•é–‹ï¼Œä¸èƒ½ã€Œç§’è§£ã€

#### Completion Gates (å®Œæˆé–€æª»)

| Stage | Completion Criteria |
|-------|---------------------|
| DIFFERENTIAL | hypotheses â‰¥ 5 |
| EVALUATION | æ¯å€‹å‡è¨­éƒ½å·²è©•ä¼° |
| MECHANISM | depth â‰¥ "fellow" level |
| COUNTERFACTUAL | scenarios â‰¥ 3 |
| LITERATURE | references â‰¥ 3 |
| SYSTEM | levels â‰¥ 3 (Individual/Team/Org) |

| Tool | èªªæ˜ |
|------|------|
| `rc_check_stage_complete` | æª¢æŸ¥éšæ®µæ˜¯å¦å®Œæˆ |
| `rc_get_missing_elements` | å–å¾—ç¼ºå°‘çš„å…ƒç´  |
| `rc_force_expand` | å¼·åˆ¶å±•é–‹ä¸è¶³çš„éƒ¨åˆ† |

---

### Phase 3 Legacy: Deep RCA Framework v2.0 ğŸ§ 

**å·²æ•´åˆè‡³ä¸Šè¿° Academic RCA Framework**

- [x] æ¶æ§‹è¨­è¨ˆå®Œæˆ (`docs/architecture/deep_rca_framework_v2.md`)
- [ ] ~~rc_enrich_with_literature~~ â†’ `rc_search_literature`
- [ ] ~~rc_triangulate_evidence~~ â†’ `rc_grade_evidence`
- [ ] ~~rc_barrier_analysis~~ â†’ Phase 6 Swiss Cheese
- [ ] ~~rc_generate_report~~ â†’ `rc_generate_case_report`

### Phase 3.X: VS Code æ•´åˆ

- [ ] VS Code MCP Server æ•´åˆæ¸¬è©¦
- [ ] Copilot Chat å‘¼å«é©—è­‰
- [ ] æ­£å¼ pytest æ¸¬è©¦å¥—ä»¶

---

## è¨ˆåŠƒä¸­ ğŸ“‹

### Phase 4: é€²éš Tools

- [ ] rc_execute_stage (éšæ®µæµè½‰)
- [ ] rc_create_action (æ”¹å–„æªæ–½)
- [ ] rc_generate_report (å ±å‘Šç”Ÿæˆ)
- [ ] rc_check_hfacs_coverage (HFACS è¦†è“‹ç‡æª¢æŸ¥)

### Phase 5: çœŸå¯¦æ¡ˆä¾‹åº«æ•´åˆ ğŸ¥

**ç›®æ¨™ï¼š** å°æ¥æ¬Šå¨é†«ç™‚å®‰å…¨è³‡æ–™åº«ï¼Œè®“ Agent å­¸ç¿’çœŸå¯¦ä¸–ç•Œçš„ RCA åˆ†æ

#### 5.1 AHRQ WebM&M æ•´åˆ

- [ ] Observer å±¤å°æ¥ AHRQ PSNet API
- [ ] ç¶²å€ï¼š[psnet.ahrq.gov/webmm](https://psnet.ahrq.gov/webmm)
- [ ] åƒ¹å€¼ï¼šé†«ç™‚ AI çš„é»ƒé‡‘é¡Œåº«ï¼Œæ¯å€‹æ¡ˆä¾‹é™„æœ‰å°ˆå®¶å®Œæ•´è©•è«–
- [ ] ç”¨é€”ï¼š
  - ä½œç‚º Agent è¨“ç·´çš„ Ground Truth (çœŸå€¼)
  - æ¡ˆä¾‹è¼¸å…¥ â†’ Agent ç”Ÿæˆ RCA åœ– â†’ å°æ¯” AHRQ å°ˆå®¶è©•è«–
  - è‡ªå‹•åŒ–æ¸¬è©¦ Agent åˆ†æå“è³ª

#### 5.2 ISMP ç”¨è—¥éŒ¯èª¤è³‡æ–™åº«æ•´åˆ

- [ ] Observer å±¤å°æ¥ ISMP è³‡æ–™
- [ ] ç¶²å€ï¼š[ismp.org](https://www.ismp.org)
- [ ] åƒ¹å€¼ï¼šå°ˆé–€æ”¶é›†ç”¨è—¥éŒ¯èª¤æ¡ˆä¾‹
- [ ] ç”¨é€”ï¼š
  - æ¸¬è©¦ Agent å°è—¥åæ··æ·† (LASA) çš„åµæ¸¬èƒ½åŠ›
  - æ¸¬è©¦åŠ‘é‡éŒ¯èª¤åˆ†æ
  - æ¸¬è©¦çµ¦è—¥é€”å¾‘éŒ¯èª¤åˆ†æ
  - å¼·åŒ– Personnel/Material é¡åˆ¥çš„ HFACS å»ºè­°

#### 5.3 æ¡ˆä¾‹åº« Tools (è¦åŠƒä¸­)

- [ ] rc_fetch_webmm_case - å–å¾— WebM&M æ¡ˆä¾‹
- [ ] rc_search_ismp - æœå°‹ ISMP ç”¨è—¥éŒ¯èª¤
- [ ] rc_compare_with_expert - å°æ¯”å°ˆå®¶åˆ†æ
- [ ] rc_benchmark_analysis - åˆ†æå“è³ªè©•ä¼°

---

## ğŸ”® Cartridge æ“´å±•è¨ˆç•«

### Phase 6: Prospective Cartridge (å‰ç»æ€§é é˜²æ¨¡å‹) ğŸ›¡ï¸

**é©ç”¨æƒ…å¢ƒï¼š** æ–°æµç¨‹ä¸Šç·šå‰ã€å°å…¥æ–°è¨­å‚™æ™‚ã€é é˜²é†«ç™‚ç–å¤±

#### 6.1 HFMEA (Healthcare Failure Mode and Effect Analysis)

å¾å·¥æ¥­ç•Œ FMEA æ”¹è‰¯ï¼Œå°ˆé–€ç”¨æ–¼é†«ç™‚æµç¨‹é¢¨éšªè©•ä¼°

| é …ç›® | èªªæ˜ |
|------|------|
| **åœ–çµæ§‹** | æµç¨‹åœ– (Flowchart)ï¼Œéç¶²ç‹€åœ– |
| **ç¯€é»é¡å‹** | `PROCESS_STEP` â†’ `FAILURE_MODE` â†’ `CAUSE` â†’ `EFFECT` |
| **è¨ˆç®—é‚è¼¯** | Hazard Scoring Matrix: `Severity Ã— Probability` â†’ Decision Tree |
| **èˆ‡ RPN å·®ç•°** | é†«ç™‚ç‰ˆä¸ç®— Detectionï¼Œç›´æ¥ç”¨æ±ºç­–æ¨¹åˆ¤æ–·æ˜¯å¦ä»‹å…¥ |

**è¦åŠƒ Tools:**

- [ ] rc_init_hfmea - åˆå§‹åŒ– HFMEA åˆ†æ
- [ ] rc_add_process_step - æ–°å¢æµç¨‹æ­¥é©Ÿ
- [ ] rc_add_failure_mode - æ–°å¢å¤±æ•ˆæ¨¡å¼
- [ ] rc_calc_hazard_score - è¨ˆç®—å±å®³åˆ†æ•¸
- [ ] rc_get_hfmea_matrix - å–å¾—é¢¨éšªçŸ©é™£
- [ ] rc_export_hfmea - åŒ¯å‡º HFMEA å ±å‘Š

**Agent ä»»å‹™ç¯„ä¾‹ï¼š** *"åˆ—å‡ºã€çµ¦è—¥æµç¨‹ã€çš„æ‰€æœ‰æ­¥é©Ÿï¼Œä¸¦é æ¸¬å¯èƒ½çš„å¤±æ•ˆæ¨¡å¼ã€‚"*

#### 6.2 HVA (Hazard Vulnerability Analysis)

é†«é™¢é˜²ç½ã€å¤§é‡å‚·æ‚£æ©Ÿåˆ¶åˆ†æ

| é …ç›® | èªªæ˜ |
|------|------|
| **é©ç”¨** | åœé›»ã€åœ°éœ‡ã€ç–«æƒ…çˆ†ç™¼ç­‰æƒ…å¢ƒ |
| **è¨ˆç®—é‚è¼¯** | `Risk = Probability Ã— Impact - Mitigation` |

**è¦åŠƒ Tools:**

- [ ] rc_init_hva - åˆå§‹åŒ– HVA åˆ†æ
- [ ] rc_add_hazard - æ–°å¢å±å®³äº‹ä»¶
- [ ] rc_assess_vulnerability - è©•ä¼°è„†å¼±åº¦
- [ ] rc_calc_risk_score - è¨ˆç®—é¢¨éšªå€¼

#### 6.3 Bowtie Analysis (é ˜çµåˆ†æ)

çµåˆå¨è„…åˆ†æå’Œå¾Œæœåˆ†æçš„è¦–è¦ºåŒ–æ¨¡å‹

- [ ] rc_init_bowtie - åˆå§‹åŒ–é ˜çµåœ–
- [ ] rc_add_threat - æ–°å¢å¨è„…
- [ ] rc_add_barrier - æ–°å¢é˜²è­·å±éšœ
- [ ] rc_add_consequence - æ–°å¢å¾Œæœ

---

### Phase 7: Systemic Cartridge (ç³»çµ±è¤‡é›œæ€§æ¨¡å‹) ğŸ”„

**é©ç”¨æƒ…å¢ƒï¼š** è¤‡é›œç³»çµ±äº¤äº’ä½œç”¨ï¼ˆè‡ªå‹•åŒ–è¨­å‚™ã€AI è¼”åŠ©è¨ºç™‚ï¼‰

#### 7.1 STAMP/STPA (Systems-Theoretic Accident Model and Processes)

èšç„¦æ–¼ã€Œæ§åˆ¶è¿´è·¯ã€èˆ‡ã€Œåé¥‹ç¼ºå¤±ã€ï¼Œåˆ†æã€Œæ‰€æœ‰äººéƒ½éµå®ˆ SOPï¼Œä½†ç—…äººé‚„æ˜¯æ­»äº†ã€çš„ç‹€æ³

| é …ç›® | èªªæ˜ |
|------|------|
| **æ ¸å¿ƒæ¦‚å¿µ** | äº‹æ•…æºæ–¼ã€Œæ§åˆ¶ä¸ç•¶ã€è€Œéå–®ç´”éƒ¨ä»¶æ•…éšœ |
| **åœ–çµæ§‹** | æ§åˆ¶çµæ§‹åœ– (Control Structure Diagram) |
| **ç¯€é»é¡å‹** | `CONTROLLER` â†’ `CONTROL_ACTION` â†’ `CONTROLLED_PROCESS` â†’ `FEEDBACK` |

**è¦åŠƒ Tools:**

- [ ] rc_init_stamp - åˆå§‹åŒ– STAMP åˆ†æ
- [ ] rc_add_controller - æ–°å¢æ§åˆ¶å™¨ï¼ˆäºº/ç³»çµ±ï¼‰
- [ ] rc_add_control_action - æ–°å¢æ§åˆ¶å‹•ä½œ
- [ ] rc_identify_uca - è­˜åˆ¥ä¸å®‰å…¨æ§åˆ¶è¡Œç‚º (Unsafe Control Action)
- [ ] rc_trace_feedback_loop - è¿½è¹¤åé¥‹è¿´è·¯
- [ ] rc_export_control_structure - åŒ¯å‡ºæ§åˆ¶çµæ§‹åœ–

#### 7.2 FRAM (Functional Resonance Analysis Method)

**æœ€å…ˆé€²çš„å®‰å…¨å·¥ç¨‹æ–¹æ³•**ï¼ˆæ¯” STAMP æ›´æ–°ï¼‰

| é …ç›® | èªªæ˜ |
|------|------|
| **æ ¸å¿ƒæ¦‚å¿µ** | ç³»çµ±ä¸æ˜¯ã€Œæ•…éšœã€ï¼Œè€Œæ˜¯åŠŸèƒ½çš„ã€Œè®Šç•° (Variability)ã€ç”¢ç”Ÿã€Œå…±æŒ¯ (Resonance)ã€|
| **åœ–çµæ§‹** | å…­è§’å½¢åŠŸèƒ½ç¯€é» (Hexagon) |
| **ç¯€é»å…­è§’** | `Input`, `Output`, `Precondition`, `Resource`, `Time`, `Control` |
| **åˆ†æé‡é»** | å¹³å¸¸ç„¡å®³çš„å°è®Šç•°å¦‚ä½•ç–ŠåŠ æˆå¤§ç½é›£ |

**è¦åŠƒ Tools:**

- [ ] rc_init_fram - åˆå§‹åŒ– FRAM åˆ†æ
- [ ] rc_add_function - æ–°å¢åŠŸèƒ½ç¯€é»ï¼ˆå…­è§’å½¢ï¼‰
- [ ] rc_define_coupling - å®šç¾©åŠŸèƒ½è€¦åˆ
- [ ] rc_assess_variability - è©•ä¼°è®Šç•°æ€§
- [ ] rc_detect_resonance - åµæ¸¬å…±æŒ¯æ¨¡å¼
- [ ] rc_export_fram - åŒ¯å‡º FRAM åœ–

**Agent ä»»å‹™ç¯„ä¾‹ï¼š** *"åˆ†æ ICU çš„ã€çµ¦è—¥-ç›£æ¸¬-è­¦ç¤ºã€ç³»çµ±ï¼Œæ‰¾å‡ºå¯èƒ½ç”¢ç”Ÿå…±æŒ¯çš„è®Šç•°çµ„åˆã€‚"*

#### 7.3 AcciMap (äº‹æ•…åœ°åœ–)

å¤šå±¤ç´šç³»çµ±äº‹æ•…åˆ†æ

- [ ] rc_init_accimap - åˆå§‹åŒ– AcciMap
- [ ] rc_add_system_level - æ–°å¢ç³»çµ±å±¤ç´š
- [ ] rc_trace_vertical_links - è¿½è¹¤å‚ç›´é€£çµ

---

### Phase 8: Cartridge çµ±ä¸€ä»‹é¢

**ç›®æ¨™ï¼š** è®“ Agent èƒ½åœ¨ä¸åŒåˆ†ææ¨¡å‹é–“ç„¡ç¸«åˆ‡æ›

- [ ] rc_list_cartridges - åˆ—å‡ºå¯ç”¨çš„åˆ†æå¡åŒ£
- [ ] rc_switch_cartridge - åˆ‡æ›åˆ†ææ¨¡å¼
- [ ] rc_get_cartridge_schema - å–å¾—å¡åŒ£çš„åœ–çµæ§‹å®šç¾©
- [ ] rc_validate_graph - é©—è­‰åœ–çµæ§‹ç¬¦åˆå¡åŒ£è¦ç¯„
- [ ] rc_convert_between_cartridges - è·¨å¡åŒ£è½‰æ›ï¼ˆå¦‚ 5-Whys â†’ HFACS å±¤ç´šï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Cartridge Registry                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ID          â”‚ Type         â”‚ Graph Topology â”‚ Status       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  hfacs       â”‚ Retrospectiveâ”‚ Hierarchical   â”‚ âœ… Active    â”‚
â”‚  5whys       â”‚ Retrospectiveâ”‚ Linear Chain   â”‚ âœ… Active    â”‚
â”‚  fishbone    â”‚ Retrospectiveâ”‚ Tree (6M)      â”‚ âœ… Active    â”‚
â”‚  hfmea       â”‚ Prospective  â”‚ Flowchart      â”‚ ğŸ“‹ Planned   â”‚
â”‚  hva         â”‚ Prospective  â”‚ Matrix         â”‚ ğŸ“‹ Planned   â”‚
â”‚  bowtie      â”‚ Prospective  â”‚ Dual-Tree      â”‚ ğŸ“‹ Planned   â”‚
â”‚  stamp       â”‚ Systemic     â”‚ Control Loop   â”‚ ğŸ“‹ Planned   â”‚
â”‚  fram        â”‚ Systemic     â”‚ Hexagon Net    â”‚ ğŸ“‹ Planned   â”‚
â”‚  accimap     â”‚ Systemic     â”‚ Multi-Level    â”‚ ğŸ“‹ Planned   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Phase 9: å”ä½œåŠŸèƒ½

- [ ] å¤šä½¿ç”¨è€…æ”¯æ´
- [ ] è§’è‰²æ¬Šé™ç®¡ç†
- [ ] å¯©æ ¸æµç¨‹

---

## é•·æœŸç›®æ¨™ ğŸ¯

- [ ] FHIR æ•´åˆ
- [ ] HL7 v2 è¨Šæ¯è§£æ
- [ ] åŒ¿ååŒ–è³‡æ–™åŒ¯å‡º
- [ ] çµ±è¨ˆåˆ†æå„€è¡¨æ¿
- [ ] FDA MAUDE è³‡æ–™åº«æ•´åˆ (é†«ç™‚å™¨æä¸è‰¯äº‹ä»¶)
- [ ] WHO ICPS å®Œæ•´æ•´åˆ
- [ ] è·¨é†«é™¢æ¡ˆä¾‹æ¯”å°ï¼ˆåŒ¿ååŒ–å¾Œçš„ Pattern Miningï¼‰
- [ ] AI è¼”åŠ© Cartridge æ¨è–¦ï¼ˆæ ¹æ“šæ¡ˆä¾‹ç‰¹å¾µè‡ªå‹•å»ºè­°æœ€ä½³åˆ†ææ¨¡å‹ï¼‰
