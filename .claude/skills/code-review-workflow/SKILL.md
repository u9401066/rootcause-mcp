---
name: code-review-workflow
description: Complete code review workflow for PR/MR with multiple reviewers and automated checks. Triggers: PRW, å¯©æŸ¥æµç¨‹, review workflow, PR review, MR review, pull request, merge request, ç¨‹å¼ç¢¼å¯©æŸ¥æµç¨‹, full review, å®Œæ•´å¯©æŸ¥.
version: 1.0.0
category: workflow
compatibility:
  - claude-code
  - github-copilot
  - vscode
  - codex-cli
orchestrates:
  - code-reviewer
  - security-reviewer
  - test-generator
  - ddd-architect
allowed-tools:
  - read_file
  - grep_search
  - semantic_search
  - get_errors
  - get_changed_files
  - run_in_terminal
---

# ç¨‹å¼ç¢¼å¯©æŸ¥å·¥ä½œæµ

## æè¿°

å®Œæ•´çš„ PR/MR å¯©æŸ¥æµç¨‹ï¼Œæ•´åˆè‡ªå‹•åŒ–æª¢æŸ¥å’Œå¤šç¶­åº¦å¯©æŸ¥ã€‚

## è§¸ç™¼æ¢ä»¶

- ã€Œå¯©æŸ¥ PRã€ã€Œreview PRã€ã€Œå¯©æŸ¥æµç¨‹ã€
- ã€ŒPRW: [PR é€£çµæˆ–åˆ†æ”¯]ã€

---

## ğŸ” å¯©æŸ¥æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Code Review Workflow                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 1: ğŸ“‹ æ¦‚è¦½ (Overview)                                 â”‚
â”‚  â”œâ”€ åˆ—å‡ºè®Šæ›´æª”æ¡ˆ                                             â”‚
â”‚  â”œâ”€ çµ±è¨ˆè®Šæ›´è¡Œæ•¸                                             â”‚
â”‚  â””â”€ è­˜åˆ¥è®Šæ›´ç¯„åœ                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 2: ğŸ¤– è‡ªå‹•åŒ–æª¢æŸ¥ (Automated)                          â”‚
â”‚  â”œâ”€ éœæ…‹åˆ†æ (ruff, mypy)                                   â”‚
â”‚  â”œâ”€ æ­»ç¢¼æª¢æ¸¬ (vulture)                                       â”‚
â”‚  â”œâ”€ å®‰å…¨æƒæ (bandit)                                        â”‚
â”‚  â””â”€ æ¸¬è©¦åŸ·è¡Œ                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 3: ğŸ—ï¸ æ¶æ§‹å¯©æŸ¥ (Architecture)                        â”‚
â”‚  â”œâ”€ [ddd-architect] DDD åˆè¦æª¢æŸ¥                            â”‚
â”‚  â”œâ”€ ä¾è³´æ–¹å‘é©—è­‰                                             â”‚
â”‚  â””â”€ æ¨¡çµ„åŒ–è©•ä¼°                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 4: ğŸ”’ å®‰å…¨å¯©æŸ¥ (Security)                             â”‚
â”‚  â”œâ”€ [security-reviewer] OWASP æª¢æŸ¥                          â”‚
â”‚  â”œâ”€ æ•æ„Ÿè³‡æ–™åµæ¸¬                                             â”‚
â”‚  â””â”€ èªè­‰/æˆæ¬Šå¯©æŸ¥                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 5: ğŸ“ ç¨‹å¼ç¢¼å¯©æŸ¥ (Code)                               â”‚
â”‚  â”œâ”€ [code-reviewer] å“è³ªå¯©æŸ¥                                â”‚
â”‚  â”œâ”€ å¯è®€æ€§è©•ä¼°                                               â”‚
â”‚  â”œâ”€ æ•ˆèƒ½è€ƒé‡                                                 â”‚
â”‚  â””â”€ æ¸¬è©¦è¦†è“‹ç‡                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Phase 6: ğŸ“Š ç¸½çµ (Summary)                                  â”‚
â”‚  â”œâ”€ ç”Ÿæˆå¯©æŸ¥å ±å‘Š                                             â”‚
â”‚  â”œâ”€ å»ºè­°ä¿®æ”¹é …ç›®                                             â”‚
â”‚  â””â”€ æ‰¹å‡†/è«‹æ±‚ä¿®æ”¹                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ ä½¿ç”¨ç¯„ä¾‹

### åŸºæœ¬ç”¨æ³•

```
ã€Œå¯©æŸ¥ PRã€

AI åŸ·è¡Œï¼š
1. ğŸ“‹ å–å¾—è®Šæ›´æª”æ¡ˆåˆ—è¡¨
2. ğŸ¤– åŸ·è¡Œè‡ªå‹•åŒ–æª¢æŸ¥
3. ğŸ—ï¸ é©—è­‰ DDD æ¶æ§‹
4. ğŸ”’ åŸ·è¡Œå®‰å…¨å¯©æŸ¥
5. ğŸ“ é€æª”æ¡ˆç¨‹å¼ç¢¼å¯©æŸ¥
6. ğŸ“Š ç”Ÿæˆå¯©æŸ¥å ±å‘Š
```

### æŒ‡å®šæª”æ¡ˆ

```
ã€ŒPRW: å¯©æŸ¥ src/auth/ ç›®éŒ„çš„è®Šæ›´ã€

AI åŸ·è¡Œï¼š
1. åƒ…å¯©æŸ¥æŒ‡å®šç›®éŒ„
2. é‡é»é—œæ³¨èªè­‰ç›¸é—œå®‰å…¨å•é¡Œ
```

---

## ğŸ“Š è¼¸å‡ºæ ¼å¼

```markdown
## ğŸ“‹ ç¨‹å¼ç¢¼å¯©æŸ¥å ±å‘Š

### è®Šæ›´æ¦‚è¦½

| é …ç›® | æ•¸é‡ |
|------|------|
| è®Šæ›´æª”æ¡ˆ | 8 |
| æ–°å¢è¡Œæ•¸ | +245 |
| åˆªé™¤è¡Œæ•¸ | -32 |
| æ¸¬è©¦æª”æ¡ˆ | 3 |

### ğŸ¤– è‡ªå‹•åŒ–æª¢æŸ¥

| æª¢æŸ¥é …ç›® | ç‹€æ…‹ | è©³æƒ… |
|----------|------|------|
| ruff lint | âœ… | 0 issues |
| mypy | âš ï¸ | 2 warnings |
| vulture | âœ… | 0 dead code |
| bandit | âœ… | 0 security issues |
| pytest | âœ… | 42/42 passed |

### ğŸ—ï¸ æ¶æ§‹å¯©æŸ¥

- âœ… DDD å±¤ç´šæ­£ç¢ºåˆ†é›¢
- âœ… ä¾è³´æ–¹å‘ç¬¦åˆè¦ç¯„
- âš ï¸ `UserService` å»ºè­°æ‹†åˆ† (180 è¡Œ)

### ğŸ”’ å®‰å…¨å¯©æŸ¥

- âœ… ç„¡ OWASP Top 10 é¢¨éšª
- âœ… ç„¡ç¡¬ç·¨ç¢¼æ•æ„Ÿè³‡æ–™
- âš ï¸ å»ºè­°åŠ å…¥ rate limiting

### ğŸ“ ç¨‹å¼ç¢¼å¯©æŸ¥

#### å¿…é ˆä¿®æ”¹ (Blocking)
1. **src/auth/service.py:45**
   - å•é¡Œï¼šç¼ºå°‘ None æª¢æŸ¥
   - å»ºè­°ï¼šåŠ å…¥é˜²ç¦¦æ€§æª¢æŸ¥

#### å»ºè­°ä¿®æ”¹ (Non-blocking)
1. **src/auth/dto.py:12**
   - å•é¡Œï¼šå‘½åä¸å¤ æ¸…æ™°
   - å»ºè­°ï¼š`data` â†’ `user_credentials`

#### å„ªé» (Positive)
- æ¸¬è©¦è¦†è“‹å®Œæ•´ (92%)
- éŒ¯èª¤è™•ç†å¾—ç•¶
- æ–‡æª”æ¸…æ¥š

### ğŸ“Š ç¸½çµ

| é …ç›® | è©•åˆ† |
|------|------|
| å“è³ª | â­â­â­â­ |
| å®‰å…¨ | â­â­â­â­â­ |
| æ¶æ§‹ | â­â­â­â­ |
| æ¸¬è©¦ | â­â­â­â­â­ |

**çµè«–**: ğŸŸ¡ **è«‹æ±‚ä¿®æ”¹** - ä¿®å¾© 1 å€‹ blocking issue å¾Œå¯åˆä½µ
```

---

## âš™ï¸ é…ç½®é¸é …

| åƒæ•¸ | èªªæ˜ | é è¨­å€¼ |
|------|------|--------|
| `--quick` | å¿«é€Ÿå¯©æŸ¥ï¼ˆåƒ…è‡ªå‹•åŒ–ï¼‰ | false |
| `--security-only` | åƒ…å®‰å…¨å¯©æŸ¥ | false |
| `--skip-tests` | è·³éæ¸¬è©¦åŸ·è¡Œ | false |
